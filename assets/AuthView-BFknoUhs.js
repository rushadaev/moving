import{d as U,u as A,r as m,c as k,a as p,b as g,H as N,e as t,t as y,f as V,w as P,g as u,v as n,h as R,G as q,i as f,j as F,o as v,F as S,_ as B}from"./index-C8pLlvXj.js";const D={class:"auth-view"},E={class:"p-5 pb-24"},M={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"},G={key:0,class:"text-red-500 text-sm mt-1"},H=U({__name:"AuthView",setup(T){const i=F(),c=A(),b=m(!0),r=m(!1),s=m(""),o=m({email:"",password:""}),l=m({name:"",email:"",phone:"",password:"",password_confirmation:""});function w(){b.value=!b.value,s.value=""}const x=k(()=>o.value.email.trim()!==""&&o.value.password.trim()!==""),h=k(()=>l.value.name.trim()!==""&&l.value.email.trim()!==""&&l.value.phone.trim()!==""&&l.value.password.trim()!==""&&l.value.password_confirmation.trim()!==""&&l.value.password===l.value.password_confirmation);async function L(){if(!(!x.value||r.value)){r.value=!0,s.value="";try{if(await c.login(o.value)){const e=i.currentRoute.value.query.redirect;e&&typeof e=="string"?i.push(e):i.push("/")}else s.value=c.error||"Login failed. Please try again."}catch(d){s.value="An unexpected error occurred. Please try again later.",console.error("Login error:",d)}finally{r.value=!1}}}async function C(){if(!(!h.value||r.value)){r.value=!0,s.value="";try{if(await c.register(l.value)){const e=i.currentRoute.value.query.redirect;e&&typeof e=="string"?i.push(e):i.push("/")}else s.value=c.error||"Registration failed. Please try again."}catch(d){s.value="An unexpected error occurred. Please try again later.",console.error("Register error:",d)}finally{r.value=!1}}}return(d,e)=>(v(),p("div",D,[g(N,{title:b.value?"Login":"Register"},null,8,["title"]),t("main",E,[s.value?(v(),p("div",M,[t("p",null,y(s.value),1)])):V("",!0),b.value?(v(),p("form",{key:1,onSubmit:P(L,["prevent"]),class:"space-y-4"},[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium mb-1 text-gray-700"},"Email",-1)),u(t("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=a=>o.value.email=a),class:"w-full p-2 border rounded text-gray-900 bg-white",placeholder:"you@example.com",required:""},null,512),[[n,o.value.email]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium mb-1 text-gray-700"},"Password",-1)),u(t("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=a=>o.value.password=a),class:"w-full p-2 border rounded text-gray-900 bg-white",placeholder:"••••••••",required:""},null,512),[[n,o.value.password]])]),g(q,{"small-button":"true",type:"submit",class:"w-full",disabled:!x.value||r.value},{default:R(()=>[f(y(r.value?"Logging in...":"Login"),1)]),_:1},8,["disabled"]),t("div",{class:"text-center mt-4"},[t("p",null,[e[9]||(e[9]=f(" Don't have an account? ")),t("button",{type:"button",onClick:w,class:"text-blue-500 hover:text-blue-700 ml-1"}," Register ")])])],32)):(v(),p("form",{key:2,onSubmit:P(C,["prevent"]),class:"space-y-4"},[t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium mb-1 text-gray-700"},"Name",-1)),u(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>l.value.name=a),class:"w-full p-2 border rounded text-gray-900 bg-white",placeholder:"Your Name",required:""},null,512),[[n,l.value.name]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium mb-1 text-gray-700"},"Email",-1)),u(t("input",{type:"email","onUpdate:modelValue":e[3]||(e[3]=a=>l.value.email=a),class:"w-full p-2 border rounded text-gray-900 bg-white",placeholder:"you@example.com",required:""},null,512),[[n,l.value.email]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium mb-1 text-gray-700"},"Phone",-1)),u(t("input",{type:"tel","onUpdate:modelValue":e[4]||(e[4]=a=>l.value.phone=a),class:"w-full p-2 border rounded text-gray-900 bg-white",placeholder:"+1 (123) 456-7890",required:""},null,512),[[n,l.value.phone]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium mb-1 text-gray-700"},"Password",-1)),u(t("input",{type:"password","onUpdate:modelValue":e[5]||(e[5]=a=>l.value.password=a),class:"w-full p-2 border rounded text-gray-900 bg-white",placeholder:"••••••••",required:""},null,512),[[n,l.value.password]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium mb-1 text-gray-700"},"Confirm Password",-1)),u(t("input",{type:"password","onUpdate:modelValue":e[6]||(e[6]=a=>l.value.password_confirmation=a),class:"w-full p-2 border rounded text-gray-900 bg-white",placeholder:"••••••••",required:""},null,512),[[n,l.value.password_confirmation]]),l.value.password!==l.value.password_confirmation&&l.value.password_confirmation?(v(),p("p",G," Passwords do not match ")):V("",!0)]),g(q,{type:"submit",class:"w-full",disabled:!h.value||r.value},{default:R(()=>[f(y(r.value?"Creating account...":"Register"),1)]),_:1},8,["disabled"]),t("div",{class:"text-center mt-4"},[t("p",null,[e[15]||(e[15]=f(" Already have an account? ")),t("button",{type:"button",onClick:w,class:"text-blue-500 hover:text-blue-700 ml-1"}," Login ")])])],32))]),g(S)]))}}),I=B(H,[["__scopeId","data-v-970b6e0c"]]);export{I as default};
