import{d as A,u as N,r as m,c as V,a as p,b,H as U,e as l,t as g,f as P,w as R,g as i,v as d,h as L,i as w,j as F,o as v,F as S,_ as B}from"./index-4gi88XVp.js";import{G as q}from"./GradientButton-DyQeGXpp.js";const D={class:"auth-view"},E={class:"p-5 pb-24"},M={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"},G={key:0,class:"text-red-500 text-sm mt-1"},H=A({__name:"AuthView",setup(T){const u=F(),c=N(),f=m(!0),s=m(!1),r=m(""),o=m({email:"",password:""}),t=m({name:"",email:"",password:"",password_confirmation:""});function y(){f.value=!f.value,r.value=""}const x=V(()=>o.value.email.trim()!==""&&o.value.password.trim()!==""),k=V(()=>t.value.name.trim()!==""&&t.value.email.trim()!==""&&t.value.password.trim()!==""&&t.value.password_confirmation.trim()!==""&&t.value.password===t.value.password_confirmation);async function h(){if(!(!x.value||s.value)){s.value=!0,r.value="";try{if(await c.login(o.value)){const e=u.currentRoute.value.query.redirect;e&&typeof e=="string"?u.push(e):u.push("/")}else r.value=c.error||"Login failed. Please try again."}catch(n){r.value="An unexpected error occurred. Please try again later.",console.error("Login error:",n)}finally{s.value=!1}}}async function C(){if(!(!k.value||s.value)){s.value=!0,r.value="";try{if(await c.register(t.value)){const e=u.currentRoute.value.query.redirect;e&&typeof e=="string"?u.push(e):u.push("/")}else r.value=c.error||"Registration failed. Please try again."}catch(n){r.value="An unexpected error occurred. Please try again later.",console.error("Register error:",n)}finally{s.value=!1}}}return(n,e)=>(v(),p("div",D,[b(U,{title:f.value?"Login":"Register"},null,8,["title"]),l("main",E,[r.value?(v(),p("div",M,[l("p",null,g(r.value),1)])):P("",!0),f.value?(v(),p("form",{key:1,onSubmit:R(h,["prevent"]),class:"space-y-4"},[l("div",null,[e[6]||(e[6]=l("label",{class:"block text-sm font-medium mb-1"},"Email",-1)),i(l("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=a=>o.value.email=a),class:"w-full p-2 border rounded",placeholder:"you@example.com",required:""},null,512),[[d,o.value.email]])]),l("div",null,[e[7]||(e[7]=l("label",{class:"block text-sm font-medium mb-1"},"Password",-1)),i(l("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=a=>o.value.password=a),class:"w-full p-2 border rounded",placeholder:"••••••••",required:""},null,512),[[d,o.value.password]])]),b(q,{"small-button":"true",type:"submit",class:"w-full",disabled:!x.value||s.value},{default:L(()=>[w(g(s.value?"Logging in...":"Login"),1)]),_:1},8,["disabled"]),l("div",{class:"text-center mt-4"},[l("p",null,[e[8]||(e[8]=w(" Don't have an account? ")),l("button",{type:"button",onClick:y,class:"text-blue-500 hover:text-blue-700 ml-1"}," Register ")])])],32)):(v(),p("form",{key:2,onSubmit:R(C,["prevent"]),class:"space-y-4"},[l("div",null,[e[9]||(e[9]=l("label",{class:"block text-sm font-medium mb-1"},"Name",-1)),i(l("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>t.value.name=a),class:"w-full p-2 border rounded",placeholder:"Your Name",required:""},null,512),[[d,t.value.name]])]),l("div",null,[e[10]||(e[10]=l("label",{class:"block text-sm font-medium mb-1"},"Email",-1)),i(l("input",{type:"email","onUpdate:modelValue":e[3]||(e[3]=a=>t.value.email=a),class:"w-full p-2 border rounded",placeholder:"you@example.com",required:""},null,512),[[d,t.value.email]])]),l("div",null,[e[11]||(e[11]=l("label",{class:"block text-sm font-medium mb-1"},"Password",-1)),i(l("input",{type:"password","onUpdate:modelValue":e[4]||(e[4]=a=>t.value.password=a),class:"w-full p-2 border rounded",placeholder:"••••••••",required:""},null,512),[[d,t.value.password]])]),l("div",null,[e[12]||(e[12]=l("label",{class:"block text-sm font-medium mb-1"},"Confirm Password",-1)),i(l("input",{type:"password","onUpdate:modelValue":e[5]||(e[5]=a=>t.value.password_confirmation=a),class:"w-full p-2 border rounded",placeholder:"••••••••",required:""},null,512),[[d,t.value.password_confirmation]]),t.value.password!==t.value.password_confirmation&&t.value.password_confirmation?(v(),p("p",G," Passwords do not match ")):P("",!0)]),b(q,{type:"submit",class:"w-full",disabled:!k.value||s.value},{default:L(()=>[w(g(s.value?"Creating account...":"Register"),1)]),_:1},8,["disabled"]),l("div",{class:"text-center mt-4"},[l("p",null,[e[13]||(e[13]=w(" Already have an account? ")),l("button",{type:"button",onClick:y,class:"text-blue-500 hover:text-blue-700 ml-1"}," Login ")])])],32))]),b(S)]))}}),I=B(H,[["__scopeId","data-v-c52d0fe0"]]);export{I as default};
