import{k as se,l as ae,m as T,n as $,p as B,q as R,s as F,x as le,y as ne,z as D,d as V,A as K,B as Q,c as M,C as ie,r as E,D as m,N as de,E as ce,I as q,J as ue,K as pe,L as fe,M as ve,O as ge,W as me,P as be,S as he,Q as ye,R as Ce,T as _e,U as xe,V as Se,X as Ie,Y as U,Z as Re,u as qe,$ as ke,a0 as we,a as j,b as a,e as S,a1 as d,h as g,G as W,j as ze,o as N,H as Pe,a2 as Te,i as A,a3 as G,a4 as L,a5 as $e,a6 as J,a7 as Be,t as Ee,a8 as He,f as Ne,a9 as Ae,F as je,_ as We}from"./index-DJR3TMNh.js";import{N as Me,a as P}from"./FormItem-Ctc2y8i8.js";function De(t,r="default",l=[]){const s=t.$slots[r];return s===void 0?l:s()}function Fe(t){const{lineHeight:r,borderRadius:l,fontWeightStrong:h,baseColor:s,dividerColor:p,actionColor:b,textColor1:f,textColor2:u,closeColorHover:y,closeColorPressed:C,closeIconColor:o,closeIconColorHover:I,closeIconColorPressed:v,infoColor:n,successColor:k,warningColor:_,errorColor:c,fontSize:e}=t;return Object.assign(Object.assign({},ae),{fontSize:e,lineHeight:r,titleFontWeight:h,borderRadius:l,border:`1px solid ${p}`,color:b,titleTextColor:f,iconColor:u,contentTextColor:u,closeBorderRadius:l,closeColorHover:y,closeColorPressed:C,closeIconColor:o,closeIconColorHover:I,closeIconColorPressed:v,borderInfo:`1px solid ${T(s,$(n,{alpha:.25}))}`,colorInfo:T(s,$(n,{alpha:.08})),titleTextColorInfo:f,iconColorInfo:n,contentTextColorInfo:u,closeColorHoverInfo:y,closeColorPressedInfo:C,closeIconColorInfo:o,closeIconColorHoverInfo:I,closeIconColorPressedInfo:v,borderSuccess:`1px solid ${T(s,$(k,{alpha:.25}))}`,colorSuccess:T(s,$(k,{alpha:.08})),titleTextColorSuccess:f,iconColorSuccess:k,contentTextColorSuccess:u,closeColorHoverSuccess:y,closeColorPressedSuccess:C,closeIconColorSuccess:o,closeIconColorHoverSuccess:I,closeIconColorPressedSuccess:v,borderWarning:`1px solid ${T(s,$(_,{alpha:.33}))}`,colorWarning:T(s,$(_,{alpha:.08})),titleTextColorWarning:f,iconColorWarning:_,contentTextColorWarning:u,closeColorHoverWarning:y,closeColorPressedWarning:C,closeIconColorWarning:o,closeIconColorHoverWarning:I,closeIconColorPressedWarning:v,borderError:`1px solid ${T(s,$(c,{alpha:.25}))}`,colorError:T(s,$(c,{alpha:.08})),titleTextColorError:f,iconColorError:c,contentTextColorError:u,closeColorHoverError:y,closeColorPressedError:C,closeIconColorError:o,closeIconColorHoverError:I,closeIconColorPressedError:v})}const Le={name:"Alert",common:se,self:Fe},Oe=B("alert",`
 line-height: var(--n-line-height);
 border-radius: var(--n-border-radius);
 position: relative;
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-color);
 text-align: start;
 word-break: break-word;
`,[R("border",`
 border-radius: inherit;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 transition: border-color .3s var(--n-bezier);
 border: var(--n-border);
 pointer-events: none;
 `),F("closable",[B("alert-body",[R("title",`
 padding-right: 24px;
 `)])]),R("icon",{color:"var(--n-icon-color)"}),B("alert-body",{padding:"var(--n-padding)"},[R("title",{color:"var(--n-title-text-color)"}),R("content",{color:"var(--n-content-text-color)"})]),le({originalTransition:"transform .3s var(--n-bezier)",enterToProps:{transform:"scale(1)"},leaveToProps:{transform:"scale(0.9)"}}),R("icon",`
 position: absolute;
 left: 0;
 top: 0;
 align-items: center;
 justify-content: center;
 display: flex;
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 margin: var(--n-icon-margin);
 `),R("close",`
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 right: 0;
 top: 0;
 margin: var(--n-close-margin);
 `),F("show-icon",[B("alert-body",{paddingLeft:"calc(var(--n-icon-margin-left) + var(--n-icon-size) + var(--n-icon-margin-right))"})]),F("right-adjust",[B("alert-body",{paddingRight:"calc(var(--n-close-size) + var(--n-padding) + 2px)"})]),B("alert-body",`
 border-radius: var(--n-border-radius);
 transition: border-color .3s var(--n-bezier);
 `,[R("title",`
 transition: color .3s var(--n-bezier);
 font-size: 16px;
 line-height: 19px;
 font-weight: var(--n-title-font-weight);
 `,[ne("& +",[R("content",{marginTop:"9px"})])]),R("content",{transition:"color .3s var(--n-bezier)",fontSize:"var(--n-font-size)"})]),R("icon",{transition:"color .3s var(--n-bezier)"})]),Ve=Object.assign(Object.assign({},D.props),{title:String,showIcon:{type:Boolean,default:!0},type:{type:String,default:"default"},bordered:{type:Boolean,default:!0},closable:Boolean,onClose:Function,onAfterLeave:Function,onAfterHide:Function}),Ue=V({name:"Alert",inheritAttrs:!1,props:Ve,slots:Object,setup(t){const{mergedClsPrefixRef:r,mergedBorderedRef:l,inlineThemeDisabled:h,mergedRtlRef:s}=K(t),p=D("Alert","-alert",Oe,Le,t,r),b=Q("Alert",s,r),f=M(()=>{const{common:{cubicBezierEaseInOut:v},self:n}=p.value,{fontSize:k,borderRadius:_,titleFontWeight:c,lineHeight:e,iconSize:x,iconMargin:i,iconMarginRtl:H,closeIconSize:z,closeBorderRadius:X,closeSize:Y,closeMargin:Z,closeMarginRtl:ee,padding:re}=n,{type:w}=t,{left:te,right:oe}=ce(i);return{"--n-bezier":v,"--n-color":n[q("color",w)],"--n-close-icon-size":z,"--n-close-border-radius":X,"--n-close-color-hover":n[q("closeColorHover",w)],"--n-close-color-pressed":n[q("closeColorPressed",w)],"--n-close-icon-color":n[q("closeIconColor",w)],"--n-close-icon-color-hover":n[q("closeIconColorHover",w)],"--n-close-icon-color-pressed":n[q("closeIconColorPressed",w)],"--n-icon-color":n[q("iconColor",w)],"--n-border":n[q("border",w)],"--n-title-text-color":n[q("titleTextColor",w)],"--n-content-text-color":n[q("contentTextColor",w)],"--n-line-height":e,"--n-border-radius":_,"--n-font-size":k,"--n-title-font-weight":c,"--n-icon-size":x,"--n-icon-margin":i,"--n-icon-margin-rtl":H,"--n-close-size":Y,"--n-close-margin":Z,"--n-close-margin-rtl":ee,"--n-padding":re,"--n-icon-margin-left":te,"--n-icon-margin-right":oe}}),u=h?ie("alert",M(()=>t.type[0]),f,t):void 0,y=E(!0),C=()=>{const{onAfterLeave:v,onAfterHide:n}=t;v&&v(),n&&n()};return{rtlEnabled:b,mergedClsPrefix:r,mergedBordered:l,visible:y,handleCloseClick:()=>{var v;Promise.resolve((v=t.onClose)===null||v===void 0?void 0:v.call(t)).then(n=>{n!==!1&&(y.value=!1)})},handleAfterLeave:()=>{C()},mergedTheme:p,cssVars:h?void 0:f,themeClass:u==null?void 0:u.themeClass,onRender:u==null?void 0:u.onRender}},render(){var t;return(t=this.onRender)===null||t===void 0||t.call(this),m(de,{onAfterLeave:this.handleAfterLeave},{default:()=>{const{mergedClsPrefix:r,$slots:l}=this,h={class:[`${r}-alert`,this.themeClass,this.closable&&`${r}-alert--closable`,this.showIcon&&`${r}-alert--show-icon`,!this.title&&this.closable&&`${r}-alert--right-adjust`,this.rtlEnabled&&`${r}-alert--rtl`],style:this.cssVars,role:"alert"};return this.visible?m("div",Object.assign({},ue(this.$attrs,h)),this.closable&&m(pe,{clsPrefix:r,class:`${r}-alert__close`,onClick:this.handleCloseClick}),this.bordered&&m("div",{class:`${r}-alert__border`}),this.showIcon&&m("div",{class:`${r}-alert__icon`,"aria-hidden":"true"},fe(l.icon,()=>[m(ve,{clsPrefix:r},{default:()=>{switch(this.type){case"success":return m(he,null);case"info":return m(be,null);case"warning":return m(me,null);case"error":return m(ge,null);default:return null}}})])),m("div",{class:[`${r}-alert-body`,this.mergedBordered&&`${r}-alert-body--bordered`]},ye(l.header,s=>{const p=s||this.title;return p?m("div",{class:`${r}-alert-body__title`},p):null}),l.default&&m("div",{class:`${r}-alert-body__content`},l))):null}})}});function Ge(){return Ce}const Je={name:"Space",self:Ge};let O;function Ke(){if(!_e)return!0;if(O===void 0){const t=document.createElement("div");t.style.display="flex",t.style.flexDirection="column",t.style.rowGap="1px",t.appendChild(document.createElement("div")),t.appendChild(document.createElement("div")),document.body.appendChild(t);const r=t.scrollHeight===1;return document.body.removeChild(t),O=r}return O}const Qe=Object.assign(Object.assign({},D.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrapItem:{type:Boolean,default:!0},itemClass:String,itemStyle:[String,Object],wrap:{type:Boolean,default:!0},internalUseGap:{type:Boolean,default:void 0}}),Xe=V({name:"Space",props:Qe,setup(t){const{mergedClsPrefixRef:r,mergedRtlRef:l}=K(t),h=D("Space","-space",void 0,Je,t,r),s=Q("Space",l,r);return{useGap:Ke(),rtlEnabled:s,mergedClsPrefix:r,margin:M(()=>{const{size:p}=t;if(Array.isArray(p))return{horizontal:p[0],vertical:p[1]};if(typeof p=="number")return{horizontal:p,vertical:p};const{self:{[q("gap",p)]:b}}=h.value,{row:f,col:u}=Ie(b);return{horizontal:U(u),vertical:U(f)}})}},render(){const{vertical:t,reverse:r,align:l,inline:h,justify:s,itemClass:p,itemStyle:b,margin:f,wrap:u,mergedClsPrefix:y,rtlEnabled:C,useGap:o,wrapItem:I,internalUseGap:v}=this,n=xe(De(this),!1);if(!n.length)return null;const k=`${f.horizontal}px`,_=`${f.horizontal/2}px`,c=`${f.vertical}px`,e=`${f.vertical/2}px`,x=n.length-1,i=s.startsWith("space-");return m("div",{role:"none",class:[`${y}-space`,C&&`${y}-space--rtl`],style:{display:h?"inline-flex":"flex",flexDirection:t&&!r?"column":t&&r?"column-reverse":!t&&r?"row-reverse":"row",justifyContent:["start","end"].includes(s)?`flex-${s}`:s,flexWrap:!u||t?"nowrap":"wrap",marginTop:o||t?"":`-${e}`,marginBottom:o||t?"":`-${e}`,alignItems:l,gap:o?`${f.vertical}px ${f.horizontal}px`:""}},!I&&(o||v)?n:n.map((H,z)=>H.type===Se?H:m("div",{role:"none",class:p,style:[b,{maxWidth:"100%"},o?"":t?{marginBottom:z!==x?c:""}:C?{marginLeft:i?s==="space-between"&&z===x?"":_:z!==x?k:"",marginRight:i?s==="space-between"&&z===0?"":_:"",paddingTop:e,paddingBottom:e}:{marginRight:i?s==="space-between"&&z===x?"":_:z!==x?k:"",marginLeft:i?s==="space-between"&&z===0?"":_:"",paddingTop:e,paddingBottom:e}]},H)))}}),Ye={class:"details-page"},Ze={class:"details-content"},er={key:0,class:"loading-container"},rr={key:1,class:"error-container"},tr={key:2,class:"form-container"},or={class:"form-section"},sr={class:"form-row"},ar={class:"form-section"},lr={class:"form-section"},nr={class:"form-row"},ir={class:"form-row"},dr={class:"action-buttons"},cr=V({__name:"DetailsView",setup(t){const r=ze(),l=Re(),h=qe(),s=ke(),p=E(!1),b=E(!1),f=E(!1),u=E(""),y=[{label:"Residential",value:"residential"},{label:"Commercial",value:"commercial"}],C=[{label:"Basic Package",value:"basic"},{label:"Standard Package",value:"standard"},{label:"Premium Package",value:"premium"}],o=E({property_type:"residential",square_feet:1e3,additional_objects:[],movers_count:2,hourly_rate:100,departure_time:"",labor_included:!0,package_type:"standard",addresses:[{address:"",type:"loading",order:0,latitude:0,longitude:0},{address:"",type:"unloading",order:1,latitude:0,longitude:0}],materials:[]}),I=M({get:()=>o.value.departure_time?new Date(o.value.departure_time).getTime():null,set:c=>{c&&(o.value.departure_time=new Date(c).toISOString())}});we(async()=>{if(!h.isAuthenticated){r.push("/requests");return}p.value=!0,u.value="";try{const c=Number(r.currentRoute.value.query.id);if(c){if((!l.selectedRequest||l.selectedRequest.id!==c)&&(!await l.getRequestById(c)||!l.selectedRequest)){u.value=`Failed to load request #${c}`,p.value=!1;return}f.value=!0;const e=l.selectedRequest;o.value={property_type:e.property_type||"residential",square_feet:e.square_feet||1e3,additional_objects:e.additional_objects||[],movers_count:e.movers_count||2,hourly_rate:e.hourly_rate||100,departure_time:e.departure_time||"",labor_included:e.labor_included!==void 0?e.labor_included:!0,package_type:e.package_type||"standard",addresses:e.addresses&&e.addresses.length>0?[...e.addresses]:[{address:"",type:"loading",order:0,latitude:0,longitude:0},{address:"",type:"unloading",order:1,latitude:0,longitude:0}],materials:e.materials||[]}}}catch(c){console.error("Error loading request:",c),u.value="Failed to load request details"}finally{p.value=!1}});const v=async()=>{var c;if(n()){b.value=!0;try{f.value&&((c=l.selectedRequest)!=null&&c.id)&&(await l.updateRequest(l.selectedRequest.id,o.value)?(s.success("Request updated successfully!"),r.push("/requests")):s.error("Failed to update request"))}catch(e){s.error("An error occurred while saving"),console.error("Save error:",e)}finally{b.value=!1}}},n=()=>o.value.property_type?o.value.departure_time?o.value.addresses[0].address?o.value.addresses[1].address?!0:(s.error("Please enter a delivery address"),!1):(s.error("Please enter a pickup address"),!1):(s.error("Please select a moving date and time"),!1):(s.error("Please select a property type"),!1),k=()=>{var c;(c=l.selectedRequest)!=null&&c.id&&r.push({path:"/tracking",query:{id:l.selectedRequest.id}})},_=()=>{r.push("/requests")};return(c,e)=>(N(),j("div",Ye,[a(Pe,{title:"Request Details"}),S("main",Ze,[p.value?(N(),j("div",er,[a(d(Te),{size:"medium"}),e[10]||(e[10]=S("p",null,"Loading request details...",-1))])):u.value?(N(),j("div",rr,[a(d(Ue),{type:"error",title:u.value},null,8,["title"]),a(W,{onClick:e[0]||(e[0]=x=>d(r).push("/requests")),class:"mt-4"},{default:g(()=>e[11]||(e[11]=[A(" Back to Requests ")])),_:1})])):(N(),j("div",tr,[a(d(Ae),null,{default:g(()=>{var x;return[a(d(Me),{"label-placement":"top"},{default:g(()=>[S("div",or,[e[12]||(e[12]=S("h3",{class:"section-title"},"Basic Information",-1)),S("div",sr,[a(d(P),{label:"Property Type",required:""},{default:g(()=>[a(d(G),{value:o.value.property_type,"onUpdate:value":e[1]||(e[1]=i=>o.value.property_type=i),options:y,placeholder:"Select property type"},null,8,["value"])]),_:1}),a(d(P),{label:"Square Feet",required:""},{default:g(()=>[a(d(L),{value:o.value.square_feet,"onUpdate:value":e[2]||(e[2]=i=>o.value.square_feet=i),min:0,placeholder:"Enter square feet",style:{width:"100%"}},null,8,["value"])]),_:1})]),a(d(P),{label:"Moving Date & Time",required:""},{default:g(()=>[a(d($e),{value:I.value,"onUpdate:value":e[3]||(e[3]=i=>I.value=i),type:"datetime",placeholder:"Select date and time",format:"MM/dd/yyyy HH:mm",style:{width:"100%"}},null,8,["value"])]),_:1})]),S("div",ar,[e[13]||(e[13]=S("h3",{class:"section-title"},"Addresses",-1)),a(d(P),{label:"Pickup Location",required:""},{default:g(()=>[a(d(J),{value:o.value.addresses[0].address,"onUpdate:value":e[4]||(e[4]=i=>o.value.addresses[0].address=i),placeholder:"Enter pickup address"},null,8,["value"])]),_:1}),a(d(P),{label:"Delivery Location",required:""},{default:g(()=>[a(d(J),{value:o.value.addresses[1].address,"onUpdate:value":e[5]||(e[5]=i=>o.value.addresses[1].address=i),placeholder:"Enter delivery address"},null,8,["value"])]),_:1})]),S("div",lr,[e[15]||(e[15]=S("h3",{class:"section-title"},"Service Details",-1)),S("div",nr,[a(d(P),{label:"Number of Movers"},{default:g(()=>[a(d(L),{value:o.value.movers_count,"onUpdate:value":e[6]||(e[6]=i=>o.value.movers_count=i),min:1,max:10,style:{width:"100%"}},null,8,["value"])]),_:1}),a(d(P),{label:"Hourly Rate ($)"},{default:g(()=>[a(d(L),{value:o.value.hourly_rate,"onUpdate:value":e[7]||(e[7]=i=>o.value.hourly_rate=i),min:0,precision:2,style:{width:"100%"}},null,8,["value"])]),_:1})]),S("div",ir,[a(d(P),{label:"Package Type"},{default:g(()=>[a(d(G),{value:o.value.package_type,"onUpdate:value":e[8]||(e[8]=i=>o.value.package_type=i),options:C,placeholder:"Select package"},null,8,["value"])]),_:1}),a(d(P),{label:"Options"},{default:g(()=>[a(d(Xe),{vertical:""},{default:g(()=>[a(d(Be),{checked:o.value.labor_included,"onUpdate:checked":e[9]||(e[9]=i=>o.value.labor_included=i)},{default:g(()=>e[14]||(e[14]=[A(" Labor included ")])),_:1},8,["checked"])]),_:1})]),_:1})])])]),_:1}),S("div",dr,[a(W,{onClick:_,disabled:b.value},{default:g(()=>e[16]||(e[16]=[A(" Cancel ")])),_:1},8,["disabled"]),a(W,{onClick:v,disabled:b.value},{default:g(()=>[A(Ee(b.value?"Saving...":"Save Changes"),1)]),_:1},8,["disabled"]),f.value&&((x=d(l).selectedRequest)!=null&&x.id)?(N(),He(W,{key:0,onClick:k,disabled:b.value},{default:g(()=>e[17]||(e[17]=[A(" Track Request ")])),_:1},8,["disabled"])):Ne("",!0)])]}),_:1})]))]),a(je)]))}}),fr=We(cr,[["__scopeId","data-v-c57b1ee0"]]);export{fr as default};
