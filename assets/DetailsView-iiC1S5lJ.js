import{k as Q,l as X,m as x,n as R,p as S,q as h,s as B,x as Y,y as Z,z as F,d as V,A as ee,B as oe,c as W,C as re,r as q,D as c,N as te,E as se,I as C,J as ne,K as le,L as ae,M as ie,O as ce,W as de,P as ue,S as fe,Q as ge,R as ve,u as he,T as pe,U as be,a as P,b as m,e as H,V as k,h as T,G as $,j as Ce,o as E,H as me,X as ye,i as w,Y as _e,t as Ie,Z as xe,f as Re,$ as qe,F as Se,_ as ze}from"./index-C8pLlvXj.js";function ke(i){const{lineHeight:o,borderRadius:s,fontWeightStrong:y,baseColor:l,dividerColor:d,actionColor:v,textColor1:u,textColor2:n,closeColorHover:f,closeColorPressed:g,closeIconColor:_,closeIconColorHover:I,closeIconColorPressed:a,infoColor:r,successColor:t,warningColor:e,errorColor:p,fontSize:z}=i;return Object.assign(Object.assign({},X),{fontSize:z,lineHeight:o,titleFontWeight:y,borderRadius:s,border:`1px solid ${d}`,color:v,titleTextColor:u,iconColor:n,contentTextColor:n,closeBorderRadius:s,closeColorHover:f,closeColorPressed:g,closeIconColor:_,closeIconColorHover:I,closeIconColorPressed:a,borderInfo:`1px solid ${x(l,R(r,{alpha:.25}))}`,colorInfo:x(l,R(r,{alpha:.08})),titleTextColorInfo:u,iconColorInfo:r,contentTextColorInfo:n,closeColorHoverInfo:f,closeColorPressedInfo:g,closeIconColorInfo:_,closeIconColorHoverInfo:I,closeIconColorPressedInfo:a,borderSuccess:`1px solid ${x(l,R(t,{alpha:.25}))}`,colorSuccess:x(l,R(t,{alpha:.08})),titleTextColorSuccess:u,iconColorSuccess:t,contentTextColorSuccess:n,closeColorHoverSuccess:f,closeColorPressedSuccess:g,closeIconColorSuccess:_,closeIconColorHoverSuccess:I,closeIconColorPressedSuccess:a,borderWarning:`1px solid ${x(l,R(e,{alpha:.33}))}`,colorWarning:x(l,R(e,{alpha:.08})),titleTextColorWarning:u,iconColorWarning:e,contentTextColorWarning:n,closeColorHoverWarning:f,closeColorPressedWarning:g,closeIconColorWarning:_,closeIconColorHoverWarning:I,closeIconColorPressedWarning:a,borderError:`1px solid ${x(l,R(p,{alpha:.25}))}`,colorError:x(l,R(p,{alpha:.08})),titleTextColorError:u,iconColorError:p,contentTextColorError:n,closeColorHoverError:f,closeColorPressedError:g,closeIconColorError:_,closeIconColorHoverError:I,closeIconColorPressedError:a})}const Te={name:"Alert",common:Q,self:ke},Ee=S("alert",`
 line-height: var(--n-line-height);
 border-radius: var(--n-border-radius);
 position: relative;
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-color);
 text-align: start;
 word-break: break-word;
`,[h("border",`
 border-radius: inherit;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 transition: border-color .3s var(--n-bezier);
 border: var(--n-border);
 pointer-events: none;
 `),B("closable",[S("alert-body",[h("title",`
 padding-right: 24px;
 `)])]),h("icon",{color:"var(--n-icon-color)"}),S("alert-body",{padding:"var(--n-padding)"},[h("title",{color:"var(--n-title-text-color)"}),h("content",{color:"var(--n-content-text-color)"})]),Y({originalTransition:"transform .3s var(--n-bezier)",enterToProps:{transform:"scale(1)"},leaveToProps:{transform:"scale(0.9)"}}),h("icon",`
 position: absolute;
 left: 0;
 top: 0;
 align-items: center;
 justify-content: center;
 display: flex;
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 margin: var(--n-icon-margin);
 `),h("close",`
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 right: 0;
 top: 0;
 margin: var(--n-close-margin);
 `),B("show-icon",[S("alert-body",{paddingLeft:"calc(var(--n-icon-margin-left) + var(--n-icon-size) + var(--n-icon-margin-right))"})]),B("right-adjust",[S("alert-body",{paddingRight:"calc(var(--n-close-size) + var(--n-padding) + 2px)"})]),S("alert-body",`
 border-radius: var(--n-border-radius);
 transition: border-color .3s var(--n-bezier);
 `,[h("title",`
 transition: color .3s var(--n-bezier);
 font-size: 16px;
 line-height: 19px;
 font-weight: var(--n-title-font-weight);
 `,[Z("& +",[h("content",{marginTop:"9px"})])]),h("content",{transition:"color .3s var(--n-bezier)",fontSize:"var(--n-font-size)"})]),h("icon",{transition:"color .3s var(--n-bezier)"})]),Pe=Object.assign(Object.assign({},F.props),{title:String,showIcon:{type:Boolean,default:!0},type:{type:String,default:"default"},bordered:{type:Boolean,default:!0},closable:Boolean,onClose:Function,onAfterLeave:Function,onAfterHide:Function}),$e=V({name:"Alert",inheritAttrs:!1,props:Pe,slots:Object,setup(i){const{mergedClsPrefixRef:o,mergedBorderedRef:s,inlineThemeDisabled:y,mergedRtlRef:l}=ee(i),d=F("Alert","-alert",Ee,Te,i,o),v=oe("Alert",l,o),u=W(()=>{const{common:{cubicBezierEaseInOut:a},self:r}=d.value,{fontSize:t,borderRadius:e,titleFontWeight:p,lineHeight:z,iconSize:j,iconMargin:A,iconMarginRtl:N,closeIconSize:L,closeBorderRadius:M,closeSize:D,closeMargin:O,closeMarginRtl:G,padding:K}=r,{type:b}=i,{left:U,right:J}=se(A);return{"--n-bezier":a,"--n-color":r[C("color",b)],"--n-close-icon-size":L,"--n-close-border-radius":M,"--n-close-color-hover":r[C("closeColorHover",b)],"--n-close-color-pressed":r[C("closeColorPressed",b)],"--n-close-icon-color":r[C("closeIconColor",b)],"--n-close-icon-color-hover":r[C("closeIconColorHover",b)],"--n-close-icon-color-pressed":r[C("closeIconColorPressed",b)],"--n-icon-color":r[C("iconColor",b)],"--n-border":r[C("border",b)],"--n-title-text-color":r[C("titleTextColor",b)],"--n-content-text-color":r[C("contentTextColor",b)],"--n-line-height":z,"--n-border-radius":e,"--n-font-size":t,"--n-title-font-weight":p,"--n-icon-size":j,"--n-icon-margin":A,"--n-icon-margin-rtl":N,"--n-close-size":D,"--n-close-margin":O,"--n-close-margin-rtl":G,"--n-padding":K,"--n-icon-margin-left":U,"--n-icon-margin-right":J}}),n=y?re("alert",W(()=>i.type[0]),u,i):void 0,f=q(!0),g=()=>{const{onAfterLeave:a,onAfterHide:r}=i;a&&a(),r&&r()};return{rtlEnabled:v,mergedClsPrefix:o,mergedBordered:s,visible:f,handleCloseClick:()=>{var a;Promise.resolve((a=i.onClose)===null||a===void 0?void 0:a.call(i)).then(r=>{r!==!1&&(f.value=!1)})},handleAfterLeave:()=>{g()},mergedTheme:d,cssVars:y?void 0:u,themeClass:n==null?void 0:n.themeClass,onRender:n==null?void 0:n.onRender}},render(){var i;return(i=this.onRender)===null||i===void 0||i.call(this),c(te,{onAfterLeave:this.handleAfterLeave},{default:()=>{const{mergedClsPrefix:o,$slots:s}=this,y={class:[`${o}-alert`,this.themeClass,this.closable&&`${o}-alert--closable`,this.showIcon&&`${o}-alert--show-icon`,!this.title&&this.closable&&`${o}-alert--right-adjust`,this.rtlEnabled&&`${o}-alert--rtl`],style:this.cssVars,role:"alert"};return this.visible?c("div",Object.assign({},ne(this.$attrs,y)),this.closable&&c(le,{clsPrefix:o,class:`${o}-alert__close`,onClick:this.handleCloseClick}),this.bordered&&c("div",{class:`${o}-alert__border`}),this.showIcon&&c("div",{class:`${o}-alert__icon`,"aria-hidden":"true"},ae(s.icon,()=>[c(ie,{clsPrefix:o},{default:()=>{switch(this.type){case"success":return c(fe,null);case"info":return c(ue,null);case"warning":return c(de,null);case"error":return c(ce,null);default:return null}}})])),c("div",{class:[`${o}-alert-body`,this.mergedBordered&&`${o}-alert-body--bordered`]},ge(s.header,l=>{const d=l||this.title;return d?c("div",{class:`${o}-alert-body__title`},d):null}),s.default&&c("div",{class:`${o}-alert-body__content`},s))):null}})}}),we={class:"details-page"},Be={class:"details-content"},He={key:0,class:"loading-container"},Ae={key:1,class:"error-container"},We={key:2,class:"form-container"},Fe={class:"action-buttons"},Ve=V({__name:"DetailsView",setup(i){const o=Ce(),s=ve(),y=he(),l=pe(),d=q(!1),v=q(!1),u=q(!1),n=q(""),f=q(),g=q({property_type:"residential",square_feet:1e3,additional_objects:[],movers_count:2,hourly_rate:100,departure_time:"",bedrooms:2,addresses:[{address:"",type:"loading",order:0,latitude:0,longitude:0},{address:"",type:"unloading",order:1,latitude:0,longitude:0}],materials:[],packing_options:[]});be(async()=>{if(!y.isAuthenticated){o.push("/requests");return}d.value=!0,n.value="";try{const t=Number(o.currentRoute.value.query.id);if(t){if((!s.selectedRequest||s.selectedRequest.id!==t)&&(!await s.getRequestById(t)||!s.selectedRequest)){n.value=`Failed to load request #${t}`,d.value=!1;return}u.value=!0;const e=s.selectedRequest;g.value={property_type:e.property_type||"residential",square_feet:e.square_feet||1e3,additional_objects:e.additional_objects||[],movers_count:e.movers_count||2,hourly_rate:e.hourly_rate||100,departure_time:e.departure_time||"",bedrooms:e.bedrooms||2,packing_options:e.packing_options||[],addresses:e.addresses&&e.addresses.length>0?[...e.addresses]:[{address:"",type:"loading",order:0,latitude:0,longitude:0},{address:"",type:"unloading",order:1,latitude:0,longitude:0}],materials:e.materials||[]}}}catch(t){console.error("Error loading request:",t),n.value="Failed to load request details"}finally{d.value=!1}});const _=async()=>{var t;if(I()){v.value=!0;try{u.value&&((t=s.selectedRequest)!=null&&t.id)&&(await s.updateRequest(s.selectedRequest.id,g.value)?(l.success("Request updated successfully!"),o.push("/requests")):l.error("Failed to update request"))}catch(e){l.error("An error occurred while saving"),console.error("Save error:",e)}finally{v.value=!1}}},I=()=>{if(!f.value)return!1;const t=f.value.validate();return t.valid?!0:(l.error(t.message),!1)},a=()=>{var t;(t=s.selectedRequest)!=null&&t.id&&o.push({path:"/tracking",query:{id:s.selectedRequest.id}})},r=()=>{o.push("/requests")};return(t,e)=>(E(),P("div",we,[m(me,{title:"Request Details"}),H("main",Be,[d.value?(E(),P("div",He,[m(k(ye),{size:"medium"}),e[2]||(e[2]=H("p",null,"Loading request details...",-1))])):n.value?(E(),P("div",Ae,[m(k($e),{type:"error",title:n.value},null,8,["title"]),m($,{onClick:e[0]||(e[0]=p=>k(o).push("/requests")),class:"mt-4"},{default:T(()=>e[3]||(e[3]=[w(" Back to Requests ")])),_:1})])):(E(),P("div",We,[m(k(qe),null,{default:T(()=>{var p;return[m(_e,{ref_key:"requestFormRef",ref:f,modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=z=>g.value=z),mode:"edit",loading:v.value},null,8,["modelValue","loading"]),H("div",Fe,[m($,{onClick:r,disabled:v.value},{default:T(()=>e[4]||(e[4]=[w(" Cancel ")])),_:1},8,["disabled"]),m($,{onClick:_,disabled:v.value},{default:T(()=>[w(Ie(v.value?"Saving...":"Save Changes"),1)]),_:1},8,["disabled"]),u.value&&((p=k(s).selectedRequest)!=null&&p.id)?(E(),xe($,{key:0,onClick:a,disabled:v.value},{default:T(()=>e[5]||(e[5]=[w(" Track Request ")])),_:1},8,["disabled"])):Re("",!0)])]}),_:1})]))]),m(Se)]))}}),Ne=ze(Ve,[["__scopeId","data-v-0a358c25"]]);export{Ne as default};
