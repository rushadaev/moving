import{d as $,c as M,h as ae,n as oe,f,_ as A,r as s,i as x,b as e,t as w,j as N,w as v,a as u,g as k,B as R,k as se,o as ne,l as de,H as ue,e as L,m as ie,p as E,q as W,u as re,F as ce}from"./index-C_3zi44G.js";import{G as me,M as ve}from"./MapInfoWindow-B8nc4wr5.js";import{G as T}from"./GradientButton-BCh08UCJ.js";import{M as F,T as Z}from"./TextField-CfKQ4YdM.js";const pe=["disabled"],fe=$({__name:"SecondaryButton",props:{disabled:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1}},emits:["click"],setup(p){return(g,o)=>(f(),M("button",{class:oe(["secondary-button",{disabled:p.disabled},{"full-width":p.fullWidth}]),disabled:p.disabled,onClick:o[0]||(o[0]=i=>g.$emit("click",i))},[ae(g.$slots,"default",{},void 0,!0)],10,pe))}}),q=A(fe,[["__scopeId","data-v-9e8f24f5"]]),ge={class:"material-counter"},be={class:"material-name"},Ce={class:"counter-controls"},_e=["disabled"],he={class:"counter-value"},Me=["disabled"],ke=$({__name:"MaterialCounter",props:{name:{type:String,required:!0},initialCount:{type:Number,default:0},disabled:{type:Boolean,default:!1}},emits:["update:count"],setup(p,{emit:g}){const o=p,i=g,l=s(o.initialCount);x(()=>o.initialCount,b=>{l.value=b});const n=()=>{l.value++,i("update:count",{name:o.name,count:l.value})},c=()=>{l.value>0&&(l.value--,i("update:count",{name:o.name,count:l.value}))};return(b,C)=>(f(),M("div",ge,[e("div",be,w(p.name),1),e("div",Ce,[e("button",{class:"counter-btn",onClick:n,disabled:p.disabled}," + ",8,_e),e("span",he,w(l.value),1),e("button",{class:"counter-btn",onClick:c,disabled:p.disabled||l.value===0}," - ",8,Me)])]))}}),Ve=A(ke,[["__scopeId","data-v-72dd706a"]]),we={class:"change-movers-form"},xe={class:"form-group"},ye={class:"input-with-label"},Ue={class:"action-buttons"},$e=$({__name:"ChangeMoversModal",props:{modelValue:{type:Boolean,default:!1},currentMovers:{type:Number,default:2}},emits:["update:modelValue","confirm","cancel"],setup(p,{emit:g}){const o=p,i=g,l=s(o.modelValue),n=s(o.currentMovers.toString()),c=s(!0);x(()=>o.modelValue,d=>{l.value=d,d&&(n.value=o.currentMovers.toString(),b())}),x(l,d=>{i("update:modelValue",d)});const b=()=>{const d=parseInt(n.value);c.value=!isNaN(d)&&d>0},C=()=>{l.value=!1,i("cancel")},r=()=>{c.value&&(i("confirm",parseInt(n.value)),l.value=!1)};return(d,a)=>(f(),N(F,{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=_=>l.value=_),title:"Change number of movers"},{default:v(()=>[e("div",we,[e("div",xe,[a[3]||(a[3]=e("label",null,"New number",-1)),e("div",ye,[u(Z,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=_=>n.value=_),type:"number",min:"1",onInput:b},null,8,["modelValue"]),a[2]||(a[2]=e("span",{class:"input-label"},"movers",-1))])]),e("div",Ue,[u(R,{onClick:C},{default:v(()=>a[4]||(a[4]=[k("Cancel")])),_:1}),u(T,{onClick:r,disabled:!c.value},{default:v(()=>a[5]||(a[5]=[k("Confirm")])),_:1},8,["disabled"])])])]),_:1},8,["modelValue"]))}}),Ae=A($e,[["__scopeId","data-v-d610dfa3"]]),Be={class:"add-material-form"},Ie={class:"form-group"},Le={class:"action-buttons"},Te=$({__name:"AddMaterialModal",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","add","cancel"],setup(p,{emit:g}){const o=p,i=g,l=s(o.modelValue),n=s(""),c=s(!1);x(()=>o.modelValue,d=>{l.value=d,d&&(n.value="",b())}),x(l,d=>{i("update:modelValue",d)});const b=()=>{c.value=n.value.trim().length>0},C=()=>{l.value=!1,i("cancel")},r=()=>{c.value&&(i("add",n.value.trim()),l.value=!1)};return(d,a)=>(f(),N(F,{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=_=>l.value=_),title:"Add material"},{default:v(()=>[e("div",Be,[e("div",Ie,[a[2]||(a[2]=e("label",null,"Material name",-1)),u(Z,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=_=>n.value=_),placeholder:"Type here",onInput:b},null,8,["modelValue"])]),e("div",Le,[u(R,{onClick:C},{default:v(()=>a[3]||(a[3]=[k("Cancel")])),_:1}),u(T,{onClick:r,disabled:!c.value},{default:v(()=>a[4]||(a[4]=[k("Add")])),_:1},8,["disabled"])])])]),_:1},8,["modelValue"]))}}),Ne=A(Te,[["__scopeId","data-v-25d683de"]]),Se={class:"unload-load-form"},qe={class:"operation-buttons"},Re={class:"cancel-button mt-4"},Fe=$({__name:"UnloadLoadModal",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","unload","load","cancel"],setup(p,{emit:g}){const o=p,i=g,l=s(o.modelValue);x(()=>o.modelValue,C=>{l.value=C}),x(l,C=>{i("update:modelValue",C)});const n=()=>{i("unload"),l.value=!1},c=()=>{i("load"),l.value=!1},b=()=>{l.value=!1,i("cancel")};return(C,r)=>(f(),N(F,{modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=d=>l.value=d),title:"Unload/Load"},{default:v(()=>[e("div",Se,[r[4]||(r[4]=e("div",{class:"status-message"},[e("p",null,"Select an operation to perform:")],-1)),e("div",qe,[u(T,{onClick:n,class:"mb-3"},{default:v(()=>r[1]||(r[1]=[k(" Unload at current location ")])),_:1}),u(T,{onClick:c},{default:v(()=>r[2]||(r[2]=[k(" Load from current location ")])),_:1})]),e("div",Re,[u(R,{onClick:b,class:"w-full"},{default:v(()=>r[3]||(r[3]=[k("Cancel")])),_:1})])])]),_:1},8,["modelValue"]))}}),Oe=A(Fe,[["__scopeId","data-v-566dd781"]]),Ee={class:"tracking-view"},We={class:"p-0"},Ze={key:0,class:"status-message"},ze={class:"floating-time-cards"},De={class:"bg-white bg-opacity-90 rounded-lg p-3 shadow-sm flex-1 mr-2"},Ge={class:"font-medium"},je={class:"bg-white bg-opacity-90 rounded-lg p-3 shadow-sm flex-1 ml-2"},He={class:"font-medium"},Pe={key:0,class:"floating-addresses"},Je={class:"bg-white bg-opacity-90 rounded-lg p-3 shadow-sm"},Ye={key:1,class:"absolute bottom-24 left-0 right-0 flex justify-center"},Ke={class:"floating-action-button"},Qe={key:1,class:"px-4 pt-4"},Xe={class:"bg-white rounded-lg p-3 shadow-sm"},et={class:"materials-list"},tt={key:2,class:"p-4 action-buttons"},lt={class:"grid grid-cols-2 gap-3"},at={class:"footer-container"},ot=$({__name:"TrackingView",setup(p){const g=re(),o=s(null),i=s("12:00"),l=s("45:54"),n=s(!1),c=s(!1),b=s(2),C=s(!1),r=s(!1),d=s(!1),a=s(!1),_=s([{id:1,address:"Address 1"},{id:2,address:"Address 2"}]),y=s([{id:1,name:"Material 1",count:3},{id:2,name:"Material 2",count:3},{id:3,name:"Material 3",count:3}]),O=s({lat:40.7128,lng:-74.006}),z=s(12),B=s([]),I=s(null),S=s(!1),D=se(()=>n.value?c.value?"Continue":a.value?"Complete request":"Take a break":"Start moving"),G=()=>{var m;n.value?c.value?(c.value=!1,console.log("Continuing after break")):a.value?j():(c.value=!0,console.log("Taking a break")):(n.value=!0,console.log("Started moving with request:",(m=o.value)==null?void 0:m.requestNumber))},j=()=>{console.log("Completing request with materials:",y.value),g.push("/")},H=()=>{C.value=!0},P=m=>{b.value=m,console.log("Number of movers changed to:",m)},J=()=>{r.value=!0},Y=m=>{const t=y.value.length>0?Math.max(...y.value.map(V=>V.id))+1:1;y.value.push({id:t,name:m,count:0}),console.log("Material added:",m)},K=({name:m,count:t})=>{const V=y.value.find(U=>U.name===m);V&&(V.count=t)},Q=()=>{d.value=!0},X=()=>{console.log("Unload operation triggered"),a.value=!0},ee=()=>{console.log("Load operation triggered")},te=m=>{I.value=m,S.value=!0},le=()=>{S.value=!1,I.value=null};return ne(()=>{var t,V;const m=localStorage.getItem("selectedRequest");m?(o.value=JSON.parse(m),(t=o.value)!=null&&t.loadingAddress&&(_.value=[],_.value.push({id:1,address:o.value.loadingAddress}),(V=o.value)!=null&&V.unloadingAddress&&_.value.push({id:2,address:o.value.unloadingAddress}),B.value=[{position:{lat:40.7128,lng:-74.006},title:"Loading Point",icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#5D87EE">
                <path d="M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.13 15.87 2 12 2ZM12 11.5C10.62 11.5 9.5 10.38 9.5 9C9.5 7.62 10.62 6.5 12 6.5C13.38 6.5 14.5 7.62 14.5 9C14.5 10.38 13.38 11.5 12 11.5Z"/>
              </svg>
            `)}},{position:{lat:40.7328,lng:-73.996},title:"Unloading Point",icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#F97066">
                <path d="M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22C12 22 19 14.25 19 9C19 5.13 15.87 2 12 2ZM12 11.5C10.62 11.5 9.5 10.38 9.5 9C9.5 7.62 10.62 6.5 12 6.5C13.38 6.5 14.5 7.62 14.5 9C14.5 10.38 13.38 11.5 12 11.5Z"/>
              </svg>
            `)}}],O.value=B.value[0].position)):g.push("/"),document.addEventListener("marker-click",U=>{te(U.detail)})}),de(()=>{document.removeEventListener("marker-click",()=>{})}),(m,t)=>{var V,U;return f(),M("div",Ee,[u(ue,{title:o.value?o.value.requestNumber:"Request number"},null,8,["title"]),e("main",We,[c.value?(f(),M("div",Ze,t[3]||(t[3]=[e("div",{class:"bg-blue-100 text-blue-800 p-3 text-center rounded-lg mx-4 my-2"}," You took a break ",-1)]))):L("",!0),e("div",{class:"map-container relative",style:ie({height:n.value?"calc(100vh - 200px)":"calc(100vh - 150px)"})},[u(me,{height:"100%",center:O.value,zoom:z.value,markers:B.value,showRoute:!0,origin:(V=B.value[0])==null?void 0:V.position,destination:(U=B.value[1])==null?void 0:U.position},null,8,["center","zoom","markers","origin","destination"]),e("div",ze,[e("div",De,[t[4]||(t[4]=e("h2",{class:"text-gray-500 text-sm"},"Departure time",-1)),e("p",Ge,w(i.value),1)]),e("div",je,[t[5]||(t[5]=e("h2",{class:"text-gray-500 text-sm"},"Travel time",-1)),e("p",He,w(l.value),1)])]),n.value?(f(),M("div",Pe,[e("div",Je,[t[6]||(t[6]=e("h2",{class:"text-gray-500 text-sm mb-2"},"Unloading point",-1)),(f(!0),M(E,null,W(_.value,h=>(f(),M("div",{key:h.id,class:"font-medium mb-1"},w(h.address),1))),128))])])):L("",!0),S.value&&I.value?(f(),M("div",Ye,[u(ve,{title:I.value.title,onClose:le},{actions:v(()=>t[7]||(t[7]=[e("button",{class:"text-blue-500 text-sm font-medium"},"View Details",-1)])),default:v(()=>[e("p",null,w(I.value.address),1)]),_:1},8,["title"])])):L("",!0),t[8]||(t[8]=e("div",{class:"absolute bottom-24 left-0 right-0 flex justify-center"},[e("div",{class:"w-16 h-1 bg-blue-500 rounded-full"})],-1)),e("div",Ke,[u(T,{onClick:G,class:"w-full"},{default:v(()=>[k(w(D.value),1)]),_:1})])],4),n.value?(f(),M("div",Qe,[e("div",Xe,[t[9]||(t[9]=e("h2",{class:"text-gray-500 text-sm mb-2"},"Used materials",-1)),e("div",et,[(f(!0),M(E,null,W(y.value,h=>(f(),N(Ve,{key:h.id,name:h.name,"initial-count":h.count,"onUpdate:count":K},null,8,["name","initial-count"]))),128))])])])):L("",!0),n.value&&!a.value?(f(),M("div",tt,[e("div",lt,[u(q,{onClick:J},{default:v(()=>t[10]||(t[10]=[k(" Add materials ")])),_:1}),u(q,{onClick:Q},{default:v(()=>t[11]||(t[11]=[k(" Unload/Load ")])),_:1}),u(q,{onClick:H,class:"col-span-2"},{default:v(()=>t[12]||(t[12]=[k(" Change number of movers ")])),_:1})])])):L("",!0)]),u(Ae,{modelValue:C.value,"onUpdate:modelValue":t[0]||(t[0]=h=>C.value=h),"current-movers":b.value,onConfirm:P},null,8,["modelValue","current-movers"]),u(Ne,{modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=h=>r.value=h),onAdd:Y},null,8,["modelValue"]),u(Oe,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=h=>d.value=h),onUnload:X,onLoad:ee},null,8,["modelValue"]),e("div",at,[u(ce)])])}}}),it=A(ot,[["__scopeId","data-v-632a3dc7"]]);export{it as default};
